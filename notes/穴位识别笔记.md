# 穴位识别笔记

1.安装HRnet

```
安装 OpenMMLab 的基础库 (MIM 是他们的包管理器，非常好用)
pip install -U openmim -i https://pypi.tuna.tsinghua.edu.cn/simple
mim install mmengine -i https://pypi.tuna.tsinghua.edu.cn/simple
mim install "mmcv>=2.0.0" -i https://pypi.tuna.tsinghua.edu.cn/simple
```

```
# 1. 克隆仓库
git clone https://github.com/open-mmlab/mmpose.git
cd mmpose

# 2. 安装依赖
pip install -r requirements.txt

# 3. 以“开发者模式”安装
# 这一步很关键：这样你修改本地代码后，训练时才会生效！
pip install -v -e .
```





我有一个数据集放在dataset文件夹里，里面分为train和val两个文件夹，train里面又分为depthmaps、images、pointlabels文件夹，分别存放（480，640）大小的深度图.npy（以depth命名开头）、（480，640）大小的彩色图.png（文件名以color开头），以及txt标签信息（有178个穴位信息，也就是每个txt有539个数字，前5个数字分别是大类、人体的x,y,w,h信息，后面每三个数字是穴位的x,y,以及存在性，文件名也以color开头），我需要你写一份代码训练模型预测点位，以ipynb的格式书写，方便我调试，HRNET的官方结构提供给你参考。

要求：

1.图片大小就以原尺寸进行训练，使用HRnet（就用pytorch实现）对穴位进行预测，注意标签的读取格式

2.使用的库尽量简单

3.输出训练的进度条

4.输出热力图，并且写一个调用最佳模型进行预测的代码，图形化显示预测与标记的点位





我有一个数据集放在dataset文件夹里，里面分为train和val两个文件夹，train里面又分为depthmaps、images、pointlabels文件夹，分别存放（480，640）大小的深度图.npy（以depth命名开头）、（480，640）大小的彩色图.png（文件名以color开头），以及txt标签信息（有178个穴位信息，也就是每个txt有539个数字，前5个数字分别是大类、人体的x,y,w,h信息，后面每三个数字是穴位的x,y,以及存在性，文件名也以color开头），我需要你写一份代码训练模型预测点位，以ipynb的格式书写，方便我调试，HRNET的官方结构提供给你参考。

要求：

1.图片大小就以原尺寸进行训练，使用HRnet（就用pytorch实现）对穴位进行预测，注意标签的读取格式

2.使用的库尽量简单，输出训练的进度条

3.以存在性预测准确率和预测点位距离真实点5像素以内的百分比两个指标进行训练

4.直接预测点位x，y，并且写一个调用最佳模型进行预测的代码，图形化显示预测与标记的点位